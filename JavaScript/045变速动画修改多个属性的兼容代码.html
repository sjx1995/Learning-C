<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>封装变速动画动画-修改一个属性</title>
    <style>
        #box   {
            width: 100px;
            height: 100px;
            background-color: #195f12;
            position: absolute;
            top: 50px;
            left: 100px;
        }
    </style>
</head>
<body>
<input type="button" id="btn" value="改变宽高和位置">
<div id="box"></div>
<script>
    // 获取任意元素的任意属性的函数，见043
    function getElementStyle(element,attr) {
        return window.getComputedStyle?window.getComputedStyle(element,null)[attr]:element.currentStyle[attr];
    }

    // 元素的需要改变的样式和对应的值，以键值对的形式存储在对象中
    var targetStyle={"width":400,"height":300,"top":100,"left":400};

    // 变速动画函数，可缓动地改变目标元素的多个属性，如同时改变位置和大小等
    // 参数：目标元素；目标元素的属性名(字符串)；目标元素的属性变化后的值(数字)
    function moveAnimate(element,json) {
        clearInterval(element.intervalId);
        element.intervalId=setInterval(function () {
            var flag=true;
            for (var attr in json){
                var current=parseInt(getElementStyle(element,attr));
                var target=json[attr];
                var step=(target-current)/10;
                step=target-current>0?step:-step;
                current+=step;
                element.style[attr]=current+"px";
                if (target!=current){
                    flag=false;
                }
                if (flag){
                    clearInterval(element.intervalId);
                }
            }
        },20)
    }

    // 测试
    document.getElementById('btn').onclick=function () {
        moveAnimate(document.getElementById('box'),targetStyle);
    }
</script>
</body>
</html>